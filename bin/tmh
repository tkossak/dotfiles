#!/usr/bin/env bash

session="H"

if tmux has-session -t ${session} 2>/dev/null; then
    tmux new-window -t ${session} -n 'is'
else
    # if [[ -n "${TMUX}" ]]; then
        # needed so it won't trigger error: sessions should be nested with care, unset $TMUX to force
        TMUX= tmux new-session -d -s ${session} -n 'is'
        # tmux switch-client -t ${session}
    # else
        # tmux new-session -d -s ${session} -n 'is'
    # fi
fi

# is
if [[ -d /mnt/is/pobrane ]]; then
    tmux send-keys -t ${session} 'cd /mnt/is/pobrane' Enter
else
    tmux send-keys -t ${session} 'sshfs is: /mnt/is && cd /mnt/is/pobrane' Enter
fi
tmux send-keys -t ${session} 'ranger-cd' Enter
tmux split-window -t ${session} -h -p 50 -c '~/Downloads'
tmux send-keys -t ${session} 'ranger-cd' Enter
# tmux send-keys -t ${session} 'zf .torrent' Enter
tmux split-window -t ${session} -v -p 50 -c '/mnt/win_d/filmy/_watch_first_0'
tmux send-keys -t ${session} 'ranger-cd' Enter
tmux split-window -t ${session}:is.0 -v -p 50 -c '/mnt/win_d/filmy/_watch_first_0'
tmux send-keys -t ${session} 'ranger-cd' Enter
tmux select-pane -t 1

# dotfile
tmux new-window -t ${session} -n 'dotfiles' -c '~/.dotfiles'
tmux send-keys -t ${session} 'ranger-cd' Enter
tmux split-window -t ${session} -h -p 50 -c '~/.dotfiles'
tmux send-keys -t ${session} 'git sr' Enter
# tmux send-keys -t ${session} 'git remote show origin' Enter
tmux send-keys -t ${session} 'git branch -avv' Enter
tmux send-keys -t ${session} 'git up'

# # english
tmux new-window -t ${session} -n 'english' -c '~/Downloads/en'
tmux send-keys -t ${session} 'gn edit 2' Enter
tmux split-window -t ${session} -h -p 50 -c '~/Downloads/en'
tmux send-keys -t ${session} 'gn show 2 | tee eng_$(date +"%y%m%d_%H%M%S") | checkeng' Enter

# # tmp
tmux new-window -t ${session} -n 'tmp' -c '~/Downloads'
# tmux send-keys -t ${session} 'ranger-cd' Enter

# last
tmux select-window -t ${session}:is
if [[ -n "$TMUX" ]]; then
    tmux switch-client -t ${session}
else
    tmux attach-session -t ${session}
fi
