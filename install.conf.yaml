- clean: ['~']

- shell:
    - mkdir -p ~/apps
    - mkdir -p ~/apps/dotfiles.local
    - find bin -type f -not -name 'create_bash.model' -exec chmod +x {} \;
    - command: test -f ~/.vimrc && mv ~/.vimrc ~/.vimrc.old || true
    - command: test -f ~/.tmux.conf && mv ~/.tmux.conf ~/.tmux.conf.old || true
    - command: test -f ~/.bashrc && mv ~/.bashrc ~/.bashrc.old || true
    - command: test -f ~/.emacs && mv ~/.emacs ~/.emacs.old || true
    - command: test -f ~/.vimrc.local && mv ~/.vimrc.local ~/.vimrc.local.old || true
    - command: test -f ~/.bashrc.local && mv ~/.bashrc.local ~/.bashrc.local.old || true

- link:
    ~/.dotfiles: ''
    ~/.dotfiles.local: ../dotfiles.local/
    ~/.vimrc:
        relink: true
        path: vimrc
    ~/.tmux.conf:
        relink: true
        path: tmux.conf
    ~/.bashrc:
        relink: true
        path: bashrc
    ~/.emacs:
        relink: true
        path: emacs
    ~/.vimrc.local:
        relink: true
        path: ../dotfiles.local/vimrc.local
    ~/.bashrc.local:
        relink: true
        path: ../dotfiles.local/bashrc.local

- shell:
    - ["git submodule update --init --recursive", "Installing submodules"]
    - vim +PluginInstall +PluginClean +qall
